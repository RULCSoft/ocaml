From: Stefano Zacchiroli <zack@debian.org>
Date: Tue, 19 May 2009 17:23:34 +0200
Subject: [PATCH] Call ld with proper flags

Filter linkflags passed to ld by ocamlopt -pack and -output-obj
to remove the "-Wl," parts, which are only used when ocamlopt calls
gcc.
---
 configure |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/configure b/configure
index fb876d6..32d754b 100755
--- a/configure
+++ b/configure
@@ -1632,7 +1632,7 @@ echo "DEBUGGER=$debugger" >> Makefile
 echo "CC_PROFILE=$cc_profile" >> Makefile
 echo "SYSTHREAD_SUPPORT=$systhread_support" >> Makefile
 echo "PARTIALLD=$partialld" >> Makefile
-echo "PACKLD=\$(PARTIALLD) \$(NATIVECCLINKOPTS) -o " \
+echo "PACKLD=\$(PARTIALLD) $(echo $nativecclinkopts|sed s/-Wl,//g) -o " \
   | sed -e 's/ $/\\ /' >> Makefile
 echo "DLLCCCOMPOPTS=$dllccompopts" >> Makefile
 echo "IFLEXDIR=$iflexdir" >> Makefile
-- 
